# Client Info

Francis: [+47 90414257](tel:+4790414257) / [francis.munkvold@sum-it.no](mailto:francis.munkvold@sum-it.no)

Yannis: +94977016 / ya9smar@gmail.com

# Hosting Server

DigitalOcean:

email address: fang@wonderwave.io

password: pq+qxiATq%,+5\_%

### Petlink-ubuntu-v2210

SSH: 178.62.5.160

password: hK!I38q2r#K

### Petlink-ubuntu-v2204

ssh: 167.99.80.220

password: Fang@petlink.no

## Database migrations issue with primary key

`SET SQL_REQUIRE_PRIMARY_KEY = 0;`

## DigitalOcean API Token

dop_v1_e10a5ae6510afb92f31960fc8c55eb783eca55b5d2ae4fad27e2f452200a66c2

## Sendgrid

API Token: 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

Sender name: Petlink

Sender email:

[noreply@petlink.no](mailto:noreply@petlink.no)

[bedrift@petlink.no](mailto:bedrift@petlink.no)

# Installation

- Nginx install
  ```php
  sudo apt install nginx
  ```
- PHP install
  ```php
  sudo apt-get install php8.1 php8.1-mysql php8.1-fpm php8.1-xml php8.1-gd php8.1-curl php8.1-opcache php8.1-mbstring php8.1-bcmath
  sudo apt-get install php-imagick poppler-utils

  sudo apt-get install zip unzip php8.1-zip
  ```
- Composer install
  ```php
  php -r "copy('https://getcomposer.org/installer', 'composer-setup.php');"
  php -r "if (hash_file('sha384', 'composer-setup.php') === 'e21205b207c3ff031906575712edab6f13eb0b361f2085f1f1237b7126d785e826a450292b6cfd1d64d92e6563bbde02') { echo 'Installer verified'; } else { echo 'Installer corrupt'; unlink('composer-setup.php'); } echo PHP_EOL;"
  php composer-setup.php
  php -r "unlink('composer-setup.php');"

  sudo mv composer.phar /usr/local/bin/composer
  ```
- SSL Certificates Installation
  ```php
  apt install certbot python3-certbot-nginx

  certbot --nginx

  Email: wang@wonderwave.io
  Domain: staging.petlink.no
  ```
- Nginx configuration
  ```php
  ##
  # You should look at the following URL's in order to grasp a solid understanding
  # of Nginx configuration files in order to fully unleash the power of Nginx.
  # https://www.nginx.com/resources/wiki/start/
  # https://www.nginx.com/resources/wiki/start/topics/tutorials/config_pitfalls/
  # https://wiki.debian.org/Nginx/DirectoryStructure
  #
  # In most cases, administrators will remove this file from sites-enabled/ and
  # leave it as reference inside of sites-available where it will continue to be
  # updated by the nginx packaging team.
  #
  # This file will automatically load configuration files provided by other
  # applications, such as Drupal or Wordpress. These applications will be made
  # available underneath a path with that package name, such as /drupal8.
  #
  # Please see /usr/share/doc/nginx-doc/examples/ for more detailed examples.
  ##

  # Default server configuration
  #
  # server {
          # listen 80 default_server;
          # listen [::]:80 default_server;

          # SSL configuration
          #
          # listen 443 ssl default_server;
          # listen [::]:443 ssl default_server;
          #
          # Note: You should disable gzip for SSL traffic.
          # See: https://bugs.debian.org/773332
          #
          # Read up on ssl_ciphers to ensure a secure configuration.
          # See: https://bugs.debian.org/765782
          #
          # Self signed certs generated by the ssl-cert package
          # Don't use them in a production server!
          #
          # include snippets/snakeoil.conf;

  				# root /var/www/html;

          # Add index.php to the list if you are using PHP
          # index index.html index.htm index.nginx-debian.html;

          #server_name _;

          #location / {
                  # First attempt to serve request as file, then
                  # as directory, then fall back to displaying a 404.
                  # try_files $uri $uri/ =404;
          #}

          # pass PHP scripts to FastCGI server
          #
          #location ~ \.php$ {
          #       include snippets/fastcgi-php.conf;
          #
          #       # With php-fpm (or other unix sockets):
          #       fastcgi_pass unix:/run/php/php7.4-fpm.sock;
          #       # With php-cgi (or other tcp sockets):
          #       fastcgi_pass 127.0.0.1:9000;
          #}

          # deny access to .htaccess files, if Apache's document root
          # concurs with nginx's one
          #
          #location ~ /\.ht {
          #       deny all;
          #}
  #}

  # Virtual Host configuration for example.com
  #
  # You can move that to a different file under sites-available/ and symlink that
  # to sites-enabled/ to enable it.
  #
  #server {
  #       listen 80;
  #       listen [::]:80;
  #
  #       server_name example.com;
  #
  #       root /var/www/example.com;
  #       index index.html;
  #
  #       location / {
  #               try_files $uri $uri/ =404;
  #       }
  #}

  server {

          # SSL configuration
          #
          # listen 443 ssl default_server;
          # listen [::]:443 ssl default_server;
          #
          # Note: You should disable gzip for SSL traffic.
          # See: https://bugs.debian.org/773332
          #
          # Read up on ssl_ciphers to ensure a secure configuration.
          # See: https://bugs.debian.org/765782
          #
          # Self signed certs generated by the ssl-cert package
          # Don't use them in a production server!
          #
          # include snippets/snakeoil.conf;

          root /var/www/petlink-webapp/public;

  				# Add index.php to the list if you are using PHP
          index index.php index.html index.htm index.nginx-debian.html;
          server_name staging.petlink.no; # managed by Certbot

          location / {
                  # First attempt to serve request as file, then
                  # as directory, then fall back to displaying a 404.
                  try_files $uri $uri/ /index.php?$args;
          }

          # pass PHP scripts to FastCGI server
          #
          location ~ \.php$ {
                  include snippets/fastcgi-php.conf;
          #
          #       # With php-fpm (or other unix sockets):
                  fastcgi_pass unix:/var/run/php/php8.1-fpm.sock;
          #       # With php-cgi (or other tcp sockets):
          #       fastcgi_pass 127.0.0.1:9000;
          }

          # deny access to .htaccess files, if Apache's document root
          # concurs with nginx's one
          #
          #location ~ /\.ht {
          #       deny all;
          #}
      client_max_body_size 20M;

      listen [::]:443 ssl ipv6only=on; # managed by Certbot
      listen 443 ssl; # managed by Certbot
      ssl_certificate /etc/letsencrypt/live/staging.petlink.no/fullchain.pem; # managed by Certbot
      ssl_certificate_key /etc/letsencrypt/live/staging.petlink.no/privkey.pem; # managed by Certbot
      #include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot
      #ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot
  }
  server {
      if ($host = staging.petlink.no) {
          return 301 https://$host$request_uri;
      } # managed by Certbot

          listen 80 ;
          listen [::]:80 ;
      server_name staging.petlink.no;
      return 404; # managed by Certbot
  }
  ```
- Create SSH key on droplet
  ```php
  ssh-keygen -t rsa -b 4096 -C "fang@wonderwave.io"
  ```
- Add SSH key on bitbucket repository
- Pull the source code from bitbucket
  ```php
  git clone git@bitbucket.org:wonderwave/petlink-webapp.git
  git checkout staging
  ```
- Install PHP dependencies
  ```php
  composer install
  ```
- Project configuration
  ```php
  ## generate .env file
  cp
  ```
- File & Directory Permission
  ```jsx
  chmod -R 775 storage
  chmod 775 bootstrap/cache
  chmod 644 bootstrap/app.php

  chown -R www-data:www-data storage
  chown -R www-data:www-data bootstrap/cache
  ```
- Configure SSH key to authorized_keys
  ```php
  cd ~/.ssh
  vi authorized_keys

  ## add this key
  ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC2zZ6D3GdP8UhoJRt8JcA+BIERswPGoAyUb9NAfLt0AywJz8d/0opUArvHy586wWNzE9btALW9h7Wxd5twbpW73ekkaNrXz8K/0m1wcdIMoQ5qWNCEZZtJvT1DQ2UgaoQwmRaO1sVhSAXQgMEpF4KSwpJoKohsUfFvIRIrfUHqS3+f+xcUB75e7SqADO7Zq0sGaNFFnneOpqS4AgZsudidspqvTPeWgKp29rhCGboh2XQ6IzFk4WkaWYaT+gJrv/JGNHnFk651dD6rR8DMN1vv041nIvdN3a8xUhEHXMg/APt0rBnZ+vADqw9odzCPBYh6lrH3sU1pEOZSy5ctfXSdyvgwqhdi13BK7HLLuHc806ZB8SobyFZVWGIUdlV2KPumMkPl/VkD1ykmN907Mge8mIJDn+4i0ahgKNpxu1TAZtDMGQC6S8spG5WR31k+7B3hAoMJG+XoxWLovkHS8mRn1yOuIcV9AphQC0zT/HAcqa8O83QF12ZY4zPYIloLBac= devstar@Devs-iMac.local
  ```

# 3rd party services

1. **OpenAI credentials & API key**

   [Bedrift@petlink.no](mailto:Bedrift@petlink.no) / 1zy00ryh

   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

2. **Pusher.com**

   wang@wonderwave.io / Wonderwave@2023

   App name: petlink.no

   Cluster: eu

   Dependencies install

   ```jsx
   composer require pusher/pusher-php-server
   ```

   PUSHER_APP_ID=1619373
   PUSHER_APP_KEY=53757b679651aec2056b
   PUSHER_APP_SECRET=36c62fd82c029049eeed

3. **Twilio**

   [Bedrift@petlink.no](mailto:Bedrift@petlink.no)

   Yannisbananis123456789

4. **Google Vision**

   [bedrift@petlink.no](mailto:bedrift@petlink.no) / Petlink123!

# Testing Data

## SQL migration

```sql
INSERT INTO `users` (`id`, `name`, `role`, `email`, `email_verified_at`, `password`, `remember_token`, `created_at`, `updated_at`) VALUES
(2, 'Eldar Zaurov', 'Veterinary', 'eldazaurov@outlook.com', NULL, '$2y$10$rJbok3j98HQqihDwg0UghO7L/KpgdjCDYjV/LSKbLsGqReaOAcCky', 'qEhlAClgsNCjn9yaDeIIa1j6Kn3cVDJsyudqZ21t3BauYx7k5o1SJyRHcjf8', '2023-08-11 17:48:37', '2023-08-11 17:48:37'),
(3, 'Ivica Velic', 'Insurance', 'ivicavelic226@outlook.com', NULL, '$2y$10$sua2ep7qKg3FAcMRRSwhNOdq77MBssuB3qpEmVHHa6M6bdAbxKLKS', NULL, '2023-08-11 17:53:18', '2023-08-11 17:53:18');

INSERT INTO `vets` (`id`, `user_id`, `company_name`, `company_number`, `phone`, `address`, `bank_account_number`, `created_at`, `updated_at`) VALUES
(1, 2, 'Dyrelegeklinikken Nord', '12345678', '987654321', 'Dyreveien 1, 1234 Oslo', '9876543210', '2023-08-11 17:48:37', '2023-08-11 17:51:16');

INSERT INTO `insurance_companies` (`id`, `user_id`, `logo`, `company_name`, `company_number`, `phone`, `created_at`, `updated_at`) VALUES
(1, 3, 'p6XkwRIqdK26SOYZs8sSvwhPAhV7Sg746eUG2SA6.png', 'Trygg Forsikring AS', '987654321', '87654321', '2023-08-11 17:53:18', '2023-08-11 17:53:18');
```

## Admin

[nohman@wonderwave.io](mailto:nohman@wonderwave.io)

Wonderwave@2023

## Vet 1

Klinikkenavn: Dyrelegeklinikken Nord
Organisasjonsnummer: 12345678
Kontaktperson: Eldar Zaurov
E-post: [eldazaurov@outlook.com](mailto:eldazaurov@gmail.com)
Telefon: 987654321
Adresse: Dyreveien 1, 1234 Oslo

Kontonummer: 9876543210

password: Developer2012

## Insurance 1

Selskapets navn: Trygg Forsikring AS
Organisasjonsnummer: 987654321
Kontaktperson: Ivica Velic

E-post: [ivicavelic226@outlook.com](mailto:ivicavelic226@outlook.com)

Telefon: 87654321

password: Developer2012

## Case 1

Dyrets navn: Luna
Polisenummer (Policy Number): 987654321

Fult navn (Full Name): Wang Chao
Adresse (Address): Møllegata 4
Postnummer (Postal Code): 0179
Poststed (Post Area): Oslo
Mobilnummer (Mobile Number): 98765432
E-postadresse (Email Address): wang@wonderwave.io

Skadetittel (Injury Title): Brukket arm
Skadebeskrivelse (Damage Description): Jeg falt og brakk armen min da jeg syklet.

Kostnad (Cost): 5000 kr
Kostnadsbeskrivelse (Cost Description): Utgifter til medisinske behandlinger og medisiner.

Kostnad (Cost): 2500 kr
Kostnadsbeskrivelse (Cost Description): Kirurgisk inngrep og etterbehandling.

Vedlegg (Attachment): Bilde av skaden
Vedleggsbeskrivelse (Attachment Description): Fotografisk dokumentasjon av skaden for vurdering og referanse.
